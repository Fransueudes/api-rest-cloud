# G2 - API REST com DynamoDB e SQS usando LocalStack

Este projeto foi desenvolvido como parte da Avalia√ß√£o da disciplina de Computa√ß√£o em Nuvem.

Consiste em uma aplica√ß√£o simples de coleta e persist√™ncia de dados em ambiente simulado de nuvem, utilizando servi√ßos simulados da AWS (DynamoDB e SQS) com LocalStack, orquestrados por Docker Compose.

## üóÇÔ∏è Estrutura do projeto

```plaintext
üìÅ g2/
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îú‚îÄ‚îÄ app.py
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ worker/
‚îÇ   ‚îú‚îÄ‚îÄ worker.py
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ entrypoint.sh
‚îú‚îÄ‚îÄ docker-compose.yml
‚îî‚îÄ‚îÄ README.md
```
---
## Passos para subir o ambiente

# 1. Subir o ambiente com Docker Compose

No terminal, dentro da pasta do projeto, execute:

```bash
docker-compose down -v   # Opcional, para limpar volumes anteriores
docker-compose up --build

```

# 2. Aguarde a inicializa√ß√£o dos servi√ßos:
üóÇÔ∏è localstack ‚Üí simula os servi√ßos AWS (DynamoDB + SQS)

üöÄ api ‚Üí servi√ßo da API REST (Flask)
üöÄ worker ‚Üí servi√ßo que consome a fila SQS e processa mensagens

# 3. Verifica√ß√£o no terminal
Voc√™ ver√° no terminal mensagens indicando que os servi√ßos foram inicializados corretamente, como por exemplo:

[API] Iniciando API Flask em 0.0.0.0:5000
[Worker] Worker iniciado. Aguardando mensagens...
[LocalStack] AWS sqs.ReceiveMessage => 200

Quando todos os servi√ßos estiverem rodando, a aplica√ß√£o estar√° pronta para testes.
---
## Exemplos de requisi√ß√µes curl para testar a API
# Criar um usu√°rio (POST /users)

```bash
curl -X POST http://localhost:5000/users -H "Content-Type: application/json" -d '{"name": "Fabio", "email": "fabio@example.com"}'
```

Resposta esperada: 
```bash
{"message": "Usu√°rio criado com sucesso"}
```
# Listar usu√°rios (GET /users)

```bash
curl http://localhost:5000/users
```
Resposta esperada (exemplo):
```bash
[
    {
        "email": "fabio@example.com",
        "name": "Fabio"
    },
]
```
---
## Conceitos de aplica√ß√£o em nuvem aplicados
- Banco de dados NoSQL (DynamoDB): utilizado para persist√™ncia dos dados dos usu√°rios. Simula um servi√ßo de banco de dados gerenciado em nuvem.
- Fila de mensagens (SQS): utilizada para comunica√ß√£o ass√≠ncrona entre a API e o Worker, demonstrando um padr√£o de arquitetura com desacoplamento de servi√ßos.
- Servi√ßos desacoplados: a API e o Worker foram desenvolvidos como servi√ßos independentes, que se comunicam por meio de uma fila SQS. Isso permite escalabilidade e toler√¢ncia a falhas.
- Infraestrutura como c√≥digo: todo o ambiente foi configurado com docker-compose.yml, permitindo r√°pida reprodu√ß√£o em qualquer m√°quina.
- Emula√ß√£o de ambiente de nuvem: o LocalStack foi utilizado para simular os servi√ßos da AWS, permitindo testes e desenvolvimento local.
